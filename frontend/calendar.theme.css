/* Roboto (light-first) */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

:root {
  --bg: #ffffff;
  --fg: #0f172a;
  --muted: #64748b;
  --surface: #f8fafc;
  --surface-2: #eef2f6;
  --border: #e5e7eb;
  --brand: #2563eb;
  --brand-weak: #eaf2ff;

  --radius: 12px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --shadow-md: 0 6px 18px rgba(0,0,0,.10);
  --hour: 48px;
}

html, body { font-family: Roboto, ui-sans-serif, system-ui, -apple-system, Segoe UI, 'Helvetica Neue', Arial; color: var(--fg); background: var(--bg); }
h1, h2, h3, h4 { font-weight: 700; margin: 0 0 8px; }
p { margin: 0 0 8px; line-height: 1.45; }
small { color: var(--muted); }

.app { display: block; }
.container { max-width: 1400px; margin: 0 auto; padding: 0 12px; }
.topbar { background: var(--bg); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 20; }
.topbar .nav .btn { margin-left: 6px; }
.main { display: grid; grid-template-columns: 1fr 320px; gap: 16px; padding: 12px; }
.left, .right { background: var(--bg); }

button { font: inherit; border-radius: 10px; padding: 6px 10px; border: 1px solid var(--border); background: var(--surface); color: var(--fg); }
button:hover { filter: brightness(0.985); }
button:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(37, 99, 235, .25); }
.btn { padding: 6px 10px; border-radius: 10px; border: 1px solid var(--border); background: var(--surface); }
.btn.primary { background: var(--brand); color: white; border-color: transparent; }
.btn.ghost { background: transparent; }
.btn.danger { background: #dc2626; color: white; border-color: transparent; }

input, select, textarea { font: inherit; border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; background: var(--bg); color: var(--fg); }
input:focus-visible, select:focus-visible, textarea:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(37, 99, 235, .25); }

.nlp-box { display: grid; grid-template-columns: 1fr auto; gap: 8px; padding: 8px; border: 1px solid var(--border); border-radius: var(--radius); background: var(--surface); }
.nlp-box input { border: none; background: transparent; padding: 8px; }
.nlp-box input:focus-visible { box-shadow: none; outline: none; }
.nlp-box button { border-radius: 10px; }

.cal { border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; background: var(--bg); }
.cal-head { display: grid; grid-template-columns: 80px repeat(7, 1fr); background: var(--surface); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 5; }
.time-col { width: 80px; border-right: 1px solid var(--border); background: var(--surface); position: relative; }
.day-head { padding: 10px 8px; font-weight: 700; display: flex; align-items: center; justify-content: center; text-align: center; gap: 6px; }
.day-head .weekday { display:block; font-weight:700; }
.day-head .date { display:block; font-weight:500; color: var(--muted); margin-left: 6px; }

.cal-body { display: grid; grid-template-columns: 80px repeat(7, 1fr); }

.cal-scroll { 
  height: min(calc(12 * var(--hour)), calc(100vh - 168px));
  overflow-y: auto; position: relative; 
}

.time-cell, .grid-cell { height: var(--hour); border-bottom: 1px solid var(--border); position: relative; }
.grid-cell:nth-child(2n) { background: var(--surface-2); }

.time-cell .hh {
  position: absolute; top: 0; transform: translateY(-50%);
  right: 8px; font-size: 12px; color: var(--muted);
}

.day-col { position: relative; }
.day-col.today { background-image: linear-gradient(to bottom, rgba(37,99,235,0.07), rgba(37,99,235,0.03)); }
.day-col.today::after { content: ''; position: absolute; top: 0; bottom: 0; left: 0; right: 0; border-left: 2px solid var(--brand); border-right: 2px solid var(--brand); pointer-events: none; }

.event { position: absolute; padding: 6px 10px; border-radius: 10px; color: #fff; box-shadow: var(--shadow-sm); transition: box-shadow .15s ease, transform .15s ease; }
.event:hover { box-shadow: var(--shadow-md); transform: translateY(-1px); }
.event .event-title { font-weight: 700; font-size: 13px; }
.event .event-time { font-size: 12px; opacity: .9; }

.event[data-color] { background: color-mix(in oklab, var(--event-color, #2563eb) 86%, white); border: 1px solid color-mix(in oklab, var(--event-color, #2563eb) 60%, white); }
.event::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--event-color, #2563eb); border-top-left-radius: 10px; border-bottom-left-radius: 10px; }

.ev-actions { position: absolute; top: 4px; right: 4px; display: flex; gap: 4px; opacity: 0; transition: opacity .12s ease; }
.event:hover .ev-actions { opacity: 1; }
.ev-actions button { border: none; background: rgba(0,0,0,.25); color: white; border-radius: 6px; padding: 2px 6px; }
.ev-actions button:hover { background: rgba(0,0,0,.4); }

.create-preview { position: absolute; left: 8px; right: 8px; background: rgba(37, 99, 235, .16); border: 1px dashed rgba(37, 99, 235, .55); border-radius: 10px; pointer-events: none; }

.drag-ghost { position: absolute; left: 8px; right: 8px; pointer-events: none; background: rgba(37, 99, 235, .20); border: 1px solid rgba(37, 99, 235, .55); border-radius: 10px; }

.now-line { position: absolute; left: 0; right: 0; height: 2px; background: #ef4444; pointer-events: none; z-index: 2; }

.modal { position: fixed; inset: 0; background: rgba(0,0,0,.25); display: flex; align-items: center; justify-content: center; z-index: 50; }
.card { background: var(--bg); border: 1px solid var(--border); box-shadow: var(--shadow-md); border-radius: var(--radius); padding: 16px; min-width: 420px; }
.form-row { display: grid; grid-template-columns: 90px 1fr; align-items: center; gap: 8px; margin-bottom: 10px; }
.actions { display: flex; gap: 8px; justify-content: flex-end; }

.card.tasks-panel { padding: 12px; }
